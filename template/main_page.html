<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{% block title %}GitHere - Food Delivery{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <style>
        :root {
            /* Approximate navbar height; adjust if needed */
            --navbar-height: 64px;
        }

        html, body {
            height: 100%;
        }

        /* Make navbar a consistent height */
        .navbar {
            min-height: var(--navbar-height);
        }

        /* Carousel fills the remaining viewport height under the navbar */
        #homeCarousel {
            height: calc(100vh - var(--navbar-height));
        }

        #homeCarousel .carousel-inner,
        #homeCarousel .carousel-item {
            height: 100%;
        }

        /* All images same height, nicely cropped */
        #homeCarousel .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Make captions readable on top of the image */
        #homeCarousel .carousel-caption {
            background: rgba(0, 0, 0, 0.45);
            border-radius: 0.75rem;
            padding: 1rem 1.5rem;
        }
    </style>
</head>
<body>

<!-- NAVBAR START -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
    <div class="container">
        <!-- Brand / Name only -->
        <a class="navbar-brand fw-bold" href="{{ url_for('home_page') }}">
            GitHere
        </a>

        <!-- Toggler for mobile -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#mainNavbar" aria-controls="mainNavbar"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Navbar content -->
        <div class="collapse navbar-collapse" id="mainNavbar">
            <!-- Left menu -->
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                <li class="nav-item">
                    <a class="nav-link {% if active_page == 'home' %}active{% endif %}"
                       aria-current="page"
                       href="{{ url_for('home_page') }}">
                        Home
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link {% if active_page == 'restaurants' %}active{% endif %}"
                       href="{{ url_for('restaurants') }}">
                        Restaurants
                    </a>
                </li>

                {# Example: show a link only when logged in
                {% if current_user is defined and current_user.is_authenticated %}
                <li class="nav-item">
                    <a class="nav-link {% if active_page == 'orders' %}active{% endif %}" href="#">
                        My Orders
                    </a>
                </li>
                {% endif %}
                #}
            </ul>

            <!-- Right side: search + auth buttons -->
            <form class="d-flex me-3" role="search" method="get">
                <input class="form-control form-control-sm me-2"
                       type="search"
                       name="q"
                       placeholder="Search dishes or restaurants"
                       aria-label="Search">
                <button class="btn btn-outline-success btn-sm" type="submit">
                    Search
                </button>
            </form>

            <div class="d-flex align-items-center gap-2">
                <!-- Cart (for guests you can redirect to login in backend) -->
                <a href="#"
                   class="btn btn-outline-secondary btn-sm">
                    Cart ({{ cart_count or 0 }})
                </a>

                {% if current_user is defined and current_user.is_authenticated %}
                    <!-- If logged in: show just profile / logout -->
                    <a href="#"
                       class="btn btn-outline-primary btn-sm">
                        {{ current_user.username or 'Profile' }}
                    </a>
                    <a href="#"
                       class="btn btn-danger btn-sm">
                        Logout
                    </a>
                {% else %}
                    <!-- Login -->
                    <div class="btn-group">
                        <button type="button"
                                class="btn btn-primary btn-sm dropdown-toggle"
                                data-bs-toggle="dropdown" aria-expanded="false">
                            Login
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item" href="{{ url_for('user_login') }}">
                                    As User
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">
                                    As Restaurant
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">
                                    As Carrier
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="btn-group">
                        <button type="button"
                                class="btn btn-primary btn-sm dropdown-toggle"
                                data-bs-toggle="dropdown" aria-expanded="false">
                            Sign Up
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item" href="{{ url_for('user_signup') }}">
                                    As User
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">
                                    As Restaurant
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">
                                    As Carrier
                                </a>
                            </li>
                        </ul>
                    </div>
                {% endif %}
            </div>

        </div>
    </div>
</nav>
<!-- NAVBAR END -->

<!-- HERO CAROUSEL -->
<div id="homeCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">

        <!-- Slide 1 -->
        <div class="carousel-item active">
            <img
                src="https://images.unsplash.com/photo-1593079831268-3381b0db4a77?auto=format&fit=crop&w=1600&q=80"
                class="d-block w-100"
                alt="Food courier delivering an order">
            <div class="carousel-caption d-none d-md-block">
                <h5>Hungry? GitHere.</h5>
                <p>Discover nearby restaurants and get your favorites delivered fast.</p>
            </div>
        </div>

        <!-- Slide 2 -->
        <div class="carousel-item">
            <img
                src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=1600&q=80"
                class="d-block w-100"
                alt="Table full of restaurant food">
            <div class="carousel-caption d-none d-md-block">
                <h5>From kitchen to couch.</h5>
                <p>Fresh meals from top-rated restaurants, just a few taps away.</p>
            </div>
        </div>

        <!-- Slide 3 -->
        <div class="carousel-item">
            <img
                src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=1600&q=80"
                class="d-block w-100"
                alt="Top view of different dishes">
            <div class="carousel-caption d-none d-md-block">
                <h5>Food for every mood.</h5>
                <p>Burgers, salads, desserts and more â€“ all in one app.</p>
            </div>
        </div>

    </div>

    <!-- Controls -->
    <button class="carousel-control-prev" type="button"
            data-bs-target="#homeCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>

    <button class="carousel-control-next" type="button"
            data-bs-target="#homeCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

  <div class="container-fluid px-5">
      {% block content %}{% endblock %}
  </div>

<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
